<div *ngIf="file">
  <h2>File: {{file.name}}</h2>
  <form class="form" #form="ngForm" (ngSubmit)="onSubmit($event)">
    <label for="name">Name: </label>
    <input name="name" class="form-control" [(ngModel)]="file.name"
           placeholder="name" required>
    <div *ngIf="formErrors.name" class="alert alert-danger">
       {{ formErrors.name }}
    </div>

    <label for="mode">Mode: </label>
    <select name="mode" class="form-control" [(ngModel)]="file.mode"
            required>
      <option *ngFor="let mode of modes" [value]="mode">{{mode}}</option>
    </select>
    <div *ngIf="formErrors.mode" class="alert alert-danger">
       {{ formErrors.mode }}
    </div>

    <label for="schema">Schema: </label>
    <select name="schema" class="form-control" [(ngModel)]="file.schema"
            required>
      <option *ngFor="let schema of schemas" [value]="schema.id">{{schema.name}}</option>
    </select>
    <div *ngIf="formErrors.schema" class="alert alert-danger">
       {{ formErrors.schema }}
    </div>

    <label for="metadata">Metadata: </label>
    <select name="metadata" class="form-control" [(ngModel)]="file.metadata">
      <option *ngFor="let m of metadata" [value]="m.id">{{m.name}}</option>
    </select>
    <div *ngIf="formErrors.metadata" class="alert alert-danger">
       {{ formErrors.metadata }}
    </div>

    <p>
      Setting the following fields overrides any automatic matching that
      this application performs by default.
    </p>

    <label for="matchLocalName">Match local name: </label>
    <input name="matchLocalName" class="form-control" [(ngModel)]="file.match.localName"
           placeholder="local name">
    <div *ngIf="formErrors.matchLocalName" class="alert alert-danger">
       {{ formErrors.matchLocalName }}
    </div>

    <label for="matchNamespaceURI">Match namespace URI: </label>
    <input name="matchNamespaceURI" class="form-control" [(ngModel)]="file.match.namespaceURI"
           placeholder="URI">
    <div *ngIf="formErrors.matchNamespaceURI" class="alert alert-danger">
       {{ formErrors.matchNamespaceURI }}
    </div>

    <hr>
    <label for="uploaded">Last uploaded: </label>
    <input name="uploaded" class="form-control"
           [ngModel]="file.uploaded.toLocaleString()" readonly="true">
    <label for="downloaded">Last downloaded: </label>
    <input name="downloaded" class="form-control"
           [ngModel]="file.downloaded.toLocaleString()" readonly="true">
    <button class="btn btn-default" type="submit"
            [disabled]="!form.valid">Save</button>
  </form>
  <button class="btn btn-default" (click)="goBack()">Back</button>
</div>
